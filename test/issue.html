<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="https://backpack.openbadges.org/issuer.js"></script>
    <script>
        var link = "https://script.google.com/macros/s/AKfycbyzCKQzMrluXPts1NaYE2KHUzK9t7ov4FZWrPbBUzyVgWLe8K2P/exec?claim_code=dW5pcXVlaWQ9NUFCMTdGRDAmdHlwZT1vcGVuYmFkZ2U=";
        var assertion = {};
        function callback(err, result) {
            if (err) {
                console.log(err);
            } else {
                console.log(result);
            }
        }
        function doIssue() {
            console.log("Issue now");
            OpenBadges.issue_no_modal([link]);
        }
        
        function getData() {
            var elem = document.getElementById("download");
            elem.setAttribute("href", link);
            //elem.setAttribute("download", "assertion.json");      //not taking filename, think because file size is unknown (it's being created on the fly)
            elem.click();
        }
    </script>
</head>
<body>
    <h1>Open Badges Issuer.js Test</h1>
    <button type='submit' onclick='doIssue()';>Issue</button>
    <p>Or download the <a  href="javascript:getData()" id="download">JSON record</a></p>
</body>
</html>